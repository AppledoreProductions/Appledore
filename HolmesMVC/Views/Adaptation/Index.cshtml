@model HolmesMVC.Models.ViewModels.AdaptListView

@{
    ViewBag.Title = "Adaptations";
}

<h2>@ViewBag.Title</h2>

    @if (Model.AdaptsFilm.Any())
    {
        <h3>Film Series</h3>
        <ul>
            @foreach (var a in Model.AdaptsFilm)
            {
                <li>
                @if (a.Holmes.Length > 0)
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null) (@a.Holmes)</text>
                }
                else
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null)</text>
                }
                 @if (!string.IsNullOrEmpty(a.Translation)) {
                     <span style="font-weight: normal; font-size: small;"><i>@a.Translation</i></span>
                 }   
                </li>
            }
        </ul>
    }
    
    @if (Model.EpisodesFilm.Any() || Model.AdaptsSingleFilm.Any())
    {
        var allFilms = (from e in Model.EpisodesFilm
                       select new { ID = e.ID, Year = e.Year, Holmes = e.Holmes, Name = e.Name, Translation = e.Translation, Type = "Episode" }).ToList();
        allFilms.AddRange(from e in Model.AdaptsSingleFilm
                       select new { ID = e.ID, Year = e.Year, Holmes = e.Holmes, Name = e.Name, Translation = e.Translation, Type = "Adaptation" });
        allFilms = allFilms.OrderBy(f => f.Year).ToList();
            
            <text>
         <h3>Films</h3>
         <ul>
             @foreach (var e in allFilms)
             {
                 <li>
                 @if (e.Holmes.Length > 0)
                 {
                     <text>@e.Year @e.Holmes: '@Html.ActionLink(e.Name, "Details", e.Type, new { id = e.ID }, null)'</text>
                 }
                 else
                 {
                     <text>@e.Year: '@Html.ActionLink(e.Name, "Details", e.Type, new { id = e.ID }, null)'</text>
                 }
                 @if (!string.IsNullOrEmpty(e.Translation)) {
                     <span style="font-weight: normal; font-size: small;"><i>@e.Translation</i></span>
                 }    
                 </li>
             }
         </ul>
</text>
    }

    @if (Model.AdaptsTV.Any())
    {
        <h3>TV Series</h3>
        <ul>
            @foreach (var a in Model.AdaptsTV)
            {
            <li>
                @if (a.Holmes.Length > 0)
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null) (@a.Holmes)</text>
                }
                else
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null)</text>
                }
                 @if (!string.IsNullOrEmpty(a.Translation)) {
                     <span style="font-weight: normal; font-size: small;"><i>@a.Translation</i></span>
                 }   
            </li>
            }
        </ul>
    }

    @if (Model.AdaptsRadio.Any())
    {
        <h3>Radio Series</h3>
        <ul>
            @foreach (var a in Model.AdaptsRadio)
            {
                <li>
                @if (a.Holmes.Length > 0)
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null) (@a.Holmes)</text>
                }
                else
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null)</text>
                }
                 @if (!string.IsNullOrEmpty(a.Translation)) {
                     <span style="font-weight: normal; font-size: small;"><i>@a.Translation</i></span>
                 }   
            </li>
            }
        </ul>
    }

    @if (Model.AdaptsSingleRadio.Any())
    {
        <h3>Radio Plays</h3>
        <ul>
            @foreach (var a in Model.AdaptsSingleRadio)
            {
                <li>
                @if (a.Holmes.Length > 0)
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null) (@a.Holmes)</text>
                }
                else
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null)</text>
                }
                 @if (!string.IsNullOrEmpty(a.Translation)) {
                     <span style="font-weight: normal; font-size: small;"><i>@a.Translation</i></span>
                 }   
            </li>
            }
        </ul>
    }

    @if (Model.AdaptsOther.Any())
    {
        <h3>Other kinds of Series</h3>
        <ul>
            @foreach (var a in Model.AdaptsOther)
            {
                <li>
                @if (a.Holmes.Length > 0)
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null) (@a.Holmes, @a.Medium)</text>
                }
                else
                {
                    <text>@a.Year @Html.ActionLink(a.Name, "Details", "Adaptation", new { id = a.ID }, null) (@a.Medium)</text>
                }
                 @if (!string.IsNullOrEmpty(a.Translation)) {
                     <span style="font-weight: normal; font-size: small;"><i>@a.Translation</i></span>
                 }   
            </li>
            }
        </ul>
    }
